<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGen AI - Dynamic SaaS Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="announcement-banner" class="hidden bg-blue-600 text-white text-center p-3 text-sm font-medium">
        <span id="announcement-message"></span>
    </div>

    <header class="bg-white shadow-sm p-4 sticky top-0 z-10">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-700">NextGen AI</h1>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="#tools" class="text-gray-600 hover:text-blue-700 font-medium">Tools</a></li>
                    <li><a href="#features" class="text-gray-600 hover:text-blue-700 font-medium">Features</a></li>
                    <li><a href="#faqs" class="text-gray-600 hover:text-blue-700 font-medium">FAQs</a></li>
                    <li><a href="#testimonials" class="text-gray-600 hover:text-blue-700 font-medium">Testimonials</a></li>
                    <li><a href="#about" class="text-gray-600 hover:text-blue-700 font-medium">About</a></li>
                    <li><a href="#contact" class="text-gray-600 hover:text-blue-700 font-medium">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-6">
        <section class="text-center py-20 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-md mb-12">
            <h2 class="text-5xl font-extrabold text-gray-900 mb-4">Unleash Your Potential with AI</h2>
            <p class="text-xl text-gray-600 mb-8">Revolutionary AI tools designed to simplify your work and boost creativity.</p>
            <button class="bg-blue-600 text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-lg">Get Started</button>
        </section>

        <section id="tools" class="py-12">
            <h2 class="text-4xl font-bold text-center text-gray-900 mb-10">Our AI Tools</h2>
            <div id="tools-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <p class="text-center col-span-full text-gray-500">Loading AI tools...</p>
            </div>
        </section>

        <section id="features" class="py-12 bg-gray-100 rounded-lg shadow-md mb-12">
            <h2 class="text-4xl font-bold text-center text-gray-900 mb-10">Why Choose Us?</h2>
            <div id="features-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 p-6">
                <p class="text-center col-span-full text-gray-500">Loading features...</p>
            </div>
        </section>

        <section id="faqs" class="py-12">
            <h2 class="text-4xl font-bold text-center text-gray-900 mb-10">Frequently Asked Questions</h2>
            <div id="faqs-container" class="max-w-3xl mx-auto space-y-4">
                <p class="text-center text-gray-500">Loading FAQs...</p>
            </div>
        </section>

        <section id="testimonials" class="py-12 bg-blue-50 rounded-lg shadow-md mb-12">
            <h2 class="text-4xl font-bold text-center text-gray-900 mb-10">What Our Clients Say</h2>
            <div id="testimonials-container" class="grid grid-cols-1 md:grid-cols-2 gap-8 p-6">
                <p class="text-center col-span-full text-gray-500">Loading testimonials...</p>
            </div>
        </section>

        <section id="about" class="py-12">
            <h2 class="text-4xl font-bold text-center text-gray-900 mb-10">About Us</h2>
            <div id="about-container" class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md">
                <div id="about-mission" class="mb-6">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-3">Our Mission</h3>
                    <p class="text-gray-700">Loading mission...</p>
                </div>
                <div id="about-story" class="mb-6">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-3">Our Story</h3>
                    <p class="text-gray-700">Loading story...</p>
                </div>
                <div id="about-team">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-4">Meet Our Team</h3>
                    <div id="team-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <p class="text-center col-span-full text-gray-500">Loading team...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-12 bg-gray-100 rounded-lg shadow-md mb-12">
            <h2 class="text-4xl font-bold text-center text-gray-900 mb-10">Get in Touch</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 p-6">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-4">Contact Information</h3>
                    <p class="text-gray-700 mb-2"><strong class="text-blue-700">Email:</strong> <span id="contact-email">Loading...</span></p>
                    <p class="text-gray-700 mb-2"><strong class="text-blue-700">Phone:</strong> <span id="contact-phone">Loading...</span></p>
                    <p class="text-gray-700 mb-4"><strong class="text-blue-700">Address:</strong> <span id="contact-address">Loading...</span></p>
                    <div id="social-links" class="flex space-x-4">
                        </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-4">Send us a Message</h3>
                    <form id="contact-form">
                        <input type="text" id="contact-name" placeholder="Your Name" class="w-full p-3 mb-4 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <input type="email" id="contact-email-form" placeholder="Your Email" class="w-full p-3 mb-4 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <textarea id="contact-message" placeholder="Your Message" rows="5" class="w-full p-3 mb-4 border rounded-lg focus:ring-blue-500 focus:border-blue-500"></textarea>
                        <button type="submit" class="w-full bg-blue-600 text-white px-6 py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition duration-300">Send Message</button>
                        <p id="contact-form-message" class="mt-3 text-sm text-center"></p>
                    </form>
                </div>
            </div>
        </section>

        <section class="py-12 text-center bg-purple-600 text-white rounded-lg shadow-md mb-12">
            <h2 class="text-4xl font-bold mb-4">Subscribe to Our Newsletter</h2>
            <p class="text-lg mb-6">Get the latest AI news and updates directly to your inbox!</p>
            <form id="newsletter-form" class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-4">
                <input type="email" id="newsletter-email" placeholder="Enter your email" class="p-3 rounded-lg w-full md:w-auto min-w-[250px] text-gray-900 focus:ring-blue-500 focus:border-blue-500">
                <button type="submit" class="bg-white text-purple-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition duration-300">Subscribe</button>
            </form>
            <p id="newsletter-form-message" class="mt-3 text-sm text-center"></p>
        </section>

    </main>

    <footer class="bg-gray-800 text-white p-6 text-center">
        <p>&copy; 2025 NextGen AI. All rights reserved.</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getFirestore, collection, doc, getDoc, getDocs, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBVpddOtX1yRxslNxh8yz3SJq53eUYhkZ0",
            authDomain: "next-gen-186aa.firebaseapp.com",
            projectId: "next-gen-186aa",
            storageBucket: "next-gen-186aa.firebasestorage.app",
            messagingSenderId: "338569531164",
            appId: "1:338569531164:web:932df077b59a0a371b34d9",
            measurementId: "G-7GCT5KHFQ0"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app); // Get Firestore instance

        // --- Fetch and Render Data Functions ---

        async function fetchAndRenderAnnouncement() {
            const banner = document.getElementById('announcement-banner');
            const messageSpan = document.getElementById('announcement-message');
            try {
                const docRef = doc(db, "announcement", "current");
                const docSnap = await getDoc(docRef);
                if (docSnap.exists() && docSnap.data().active) {
                    messageSpan.textContent = docSnap.data().message;
                    banner.classList.remove('hidden');
                } else {
                    banner.classList.add('hidden');
                }
            } catch (error) {
                console.error("Error fetching announcement:", error);
                banner.classList.add('hidden'); // Hide on error
            }
        }

        async function fetchAndRenderTools() {
            const container = document.getElementById('tools-container');
            container.innerHTML = '<p class="text-center col-span-full text-gray-500">Loading AI tools...</p>';
            try {
                const querySnapshot = await getDocs(collection(db, "tools"));
                container.innerHTML = ''; // Clear loading message
                if (querySnapshot.empty) {
                    container.innerHTML = '<p class="text-center col-span-full text-gray-500">No AI tools available yet.</p>';
                    return;
                }
                querySnapshot.forEach((doc) => {
                    const tool = doc.data();
                    const toolCard = `
                        <div class="bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center">
                            <img src="${tool.image || '/placeholder.png'}" alt="${tool.title}" class="w-24 h-24 object-contain mb-4">
                            <h3 class="text-xl font-bold text-gray-900 mb-2">${tool.title}</h3>
                            <p class="text-gray-600 mb-4 flex-grow">${tool.description}</p>
                            ${tool.features && tool.features.length > 0 ? `
                                <div class="flex flex-wrap justify-center gap-2 mb-4">
                                    ${tool.features.map(f => `<span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">${f}</span>`).join('')}
                                </div>
                            ` : ''}
                            <a href="${tool.url}" target="_blank" class="mt-auto bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition duration-300">Launch Tool</a>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', toolCard);
                });
            } catch (error) {
                console.error("Error fetching tools:", error);
                container.innerHTML = '<p class="text-center col-span-full text-red-500">Failed to load tools. Please try again later.</p>';
            }
        }

        async function fetchAndRenderFeatures() {
            const container = document.getElementById('features-container');
            container.innerHTML = '<p class="text-center col-span-full text-gray-500">Loading features...</p>';
            try {
                const querySnapshot = await getDocs(collection(db, "features"));
                container.innerHTML = '';
                if (querySnapshot.empty) {
                    container.innerHTML = '<p class="text-center col-span-full text-gray-500">No features available yet.</p>';
                    return;
                }
                querySnapshot.forEach((doc) => {
                    const feature = doc.data();
                    const featureCard = `
                        <div class="bg-white rounded-lg shadow-sm p-6 text-center">
                            <div class="text-4xl mb-3">${feature.icon || '⭐'}</div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">${feature.title}</h3>
                            <p class="text-gray-600">${feature.description}</p>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', featureCard);
                });
            } catch (error) {
                console.error("Error fetching features:", error);
                container.innerHTML = '<p class="text-center col-span-full text-red-500">Failed to load features. Please try again later.</p>';
            }
        }

        async function fetchAndRenderFAQs() {
            const container = document.getElementById('faqs-container');
            container.innerHTML = '<p class="text-center text-gray-500">Loading FAQs...</p>';
            try {
                const querySnapshot = await getDocs(collection(db, "faqs"));
                container.innerHTML = '';
                if (querySnapshot.empty) {
                    container.innerHTML = '<p class="text-center text-gray-500">No FAQs available yet.</p>';
                    return;
                }
                querySnapshot.forEach((doc) => {
                    const faq = doc.data();
                    const faqItem = `
                        <div class="bg-white rounded-lg shadow-sm p-5">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">${faq.question}</h3>
                            <p class="text-gray-700">${faq.answer}</p>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', faqItem);
                });
            } catch (error) {
                console.error("Error fetching FAQs:", error);
                container.innerHTML = '<p class="text-center text-red-500">Failed to load FAQs. Please try again later.</p>';
            }
        }

        async function fetchAndRenderTestimonials() {
            const container = document.getElementById('testimonials-container');
            container.innerHTML = '<p class="text-center col-span-full text-gray-500">Loading testimonials...</p>';
            try {
                const querySnapshot = await getDocs(collection(db, "testimonials"));
                container.innerHTML = '';
                if (querySnapshot.empty) {
                    container.innerHTML = '<p class="text-center col-span-full text-gray-500">No testimonials available yet.</p>';
                    return;
                }
                querySnapshot.forEach((doc) => {
                    const testimonial = doc.data();
                    const testimonialCard = `
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <p class="text-gray-700 text-lg italic mb-4">"${testimonial.quote}"</p>
                            <p class="font-semibold text-gray-900 text-right">- ${testimonial.name}</p>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', testimonialCard);
                });
            } catch (error) {
                console.error("Error fetching testimonials:", error);
                container.innerHTML = '<p class="text-center col-span-full text-red-500">Failed to load testimonials. Please try again later.</p>';
            }
        }

        async function fetchAndRenderAboutUs() {
            const missionP = document.querySelector('#about-mission p');
            const storyP = document.querySelector('#about-story p');
            const teamContainer = document.getElementById('team-container');
            teamContainer.innerHTML = '<p class="text-center col-span-full text-gray-500">Loading team...</p>';

            try {
                const docRef = doc(db, "about", "companyInfo");
                const docSnap = await getDoc(docRef);
                if (docSnap.exists()) {
                    const aboutData = docSnap.data();
                    missionP.textContent = aboutData.mission || 'Our mission is currently unavailable.';
                    storyP.textContent = aboutData.story || 'Our story is currently unavailable.';

                    teamContainer.innerHTML = ''; // Clear loading message
                    if (aboutData.team && aboutData.team.length > 0) {
                        aboutData.team.forEach(member => {
                            const teamMemberCard = `
                                <div class="text-center">
                                    <img src="${member.image || '/placeholder-avatar.png'}" alt="${member.name}" class="w-28 h-28 rounded-full mx-auto mb-3 object-cover shadow-md">
                                    <h4 class="font-semibold text-gray-900">${member.name}</h4>
                                    <p class="text-sm text-gray-600">${member.role}</p>
                                </div>
                            `;
                            teamContainer.insertAdjacentHTML('beforeend', teamMemberCard);
                        });
                    } else {
                        teamContainer.innerHTML = '<p class="text-center col-span-full text-gray-500">No team members listed yet.</p>';
                    }
                } else {
                    missionP.textContent = 'About mission not found.';
                    storyP.textContent = 'About story not found.';
                    teamContainer.innerHTML = '<p class="text-center col-span-full text-gray-500">About Us data not found.</p>';
                }
            } catch (error) {
                console.error("Error fetching about us data:", error);
                missionP.textContent = 'Failed to load mission.';
                storyP.textContent = 'Failed to load story.';
                teamContainer.innerHTML = '<p class="text-center col-span-full text-red-500">Failed to load team data.</p>';
            }
        }

        async function fetchAndRenderContactInfo() {
            const emailSpan = document.getElementById('contact-email');
            const phoneSpan = document.getElementById('contact-phone');
            const addressSpan = document.getElementById('contact-address');
            const socialLinksDiv = document.getElementById('social-links');
            socialLinksDiv.innerHTML = ''; // Clear previous links

            try {
                const docRef = doc(db, "contactInfo", "main");
                const docSnap = await getDoc(docRef);
                if (docSnap.exists()) {
                    const contactData = docSnap.data();
                    emailSpan.textContent = contactData.email || 'N/A';
                    phoneSpan.textContent = contactData.phone || 'N/A';
                    addressSpan.textContent = contactData.address || 'N/A';

                    if (contactData.socials) {
                        for (const platform in contactData.socials) {
                            if (contactData.socials[platform]) {
                                const link = document.createElement('a');
                                link.href = contactData.socials[platform];
                                link.target = "_blank";
                                link.className = "text-blue-600 hover:text-blue-800 text-xl";
                                // A simple icon for example, consider using Font Awesome or SVG for production
                                link.innerHTML = `<i class="fab fa-${platform}"></i> ${platform.charAt(0).toUpperCase() + platform.slice(1)}`;
                                socialLinksDiv.appendChild(link);
                            }
                        }
                    }
                } else {
                    emailSpan.textContent = 'Not set';
                    phoneSpan.textContent = 'Not set';
                    addressSpan.textContent = 'Not set';
                    socialLinksDiv.innerHTML = '<p class="text-gray-500 text-sm">No social links set.</p>';
                }
            } catch (error) {
                console.error("Error fetching contact info:", error);
                emailSpan.textContent = 'Error';
                phoneSpan.textContent = 'Error';
                addressSpan.textContent = 'Error';
                socialLinksDiv.innerHTML = '<p class="text-red-500 text-sm">Failed to load contact info.</p>';
            }
        }

        // --- Form Submission Logic ---

        // Contact Form
        const contactForm = document.getElementById('contact-form');
        const contactFormMessage = document.getElementById('contact-form-message');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            contactFormMessage.textContent = '';
            contactFormMessage.className = 'mt-3 text-sm text-center';

            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email-form').value;
            const message = document.getElementById('contact-message').value;

            if (!name || !email || !message) {
                contactFormMessage.textContent = 'Please fill in all fields.';
                contactFormMessage.classList.add('text-red-500');
                return;
            }

            try {
                await addDoc(collection(db, "contactSubmissions"), {
                    name,
                    email,
                    message,
                    timestamp: serverTimestamp() // Firestore's server timestamp
                });
                contactFormMessage.textContent = 'Your message has been sent successfully!';
                contactFormMessage.classList.add('text-green-600');
                contactForm.reset();
            } catch (error) {
                console.error("Error submitting contact form:", error);
                contactFormMessage.textContent = `Failed to send message: ${error.message}`;
                contactFormMessage.classList.add('text-red-500');
            }
        });

        // Newsletter Form
        const newsletterForm = document.getElementById('newsletter-form');
        const newsletterFormMessage = document.getElementById('newsletter-form-message');
        newsletterForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            newsletterFormMessage.textContent = '';
            newsletterFormMessage.className = 'mt-3 text-sm text-center';

            const email = document.getElementById('newsletter-email').value;

            if (!email) {
                newsletterFormMessage.textContent = 'Please enter your email.';
                newsletterFormMessage.classList.add('text-red-500');
                return;
            }

            try {
                await addDoc(collection(db, "newsletterSubscriptions"), {
                    email,
                    timestamp: serverTimestamp()
                });
                newsletterFormMessage.textContent = 'Thank you for subscribing!';
                newsletterFormMessage.classList.add('text-green-600');
                newsletterForm.reset();
            } catch (error) {
                console.error("Error subscribing to newsletter:", error);
                newsletterFormMessage.textContent = `Subscription failed: ${error.message}`;
                newsletterFormMessage.classList.add('text-red-500');
            }
        });

        // Initial Load of all dynamic content
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndRenderAnnouncement();
            fetchAndRenderTools();
            fetchAndRenderFeatures();
            fetchAndRenderFAQs();
            fetchAndRenderTestimonials();
            fetchAndRenderAboutUs();
            fetchAndRenderContactInfo();
        });

    </script>
</body>
    </html>
